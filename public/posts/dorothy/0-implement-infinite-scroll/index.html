<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>[개인 프로젝트] 0. 무한 스크롤 구현하기 | quartzs2의 blog</title><meta name=keywords content="Dorothy,개인프로젝트,무한스크롤"><meta name=description content='
IntersectionObserver와 tanstack query의 useSuspenseInfiniteQuery를 사용해서 무한 스크롤을 구현해보았습니다.
API 쿼리 함수 만들기
DummyJSON의 products를 뿌려주기 위해, ky를 사용한 쿼리 함수를 만들어주었습니다.
ky는 axios같은 페칭 라이브러리인데, fetch를 확장했고 가벼워서 좋아하는 라이브러리입니다.
axios랑 마찬가지로 fetch의 400, 500 에러를 발생시키지 않는 단점을 해결했고, json 변환도 편하게 할 수 있습니다.
import { API_BASE_URL, API_ENDPOINTS } from "@constants/urls";
import type { GetAllProductsResponse } from "@custom-types/products";
import ky from "ky";

type GetAllProductsParams = {
  page?: number;
  limit?: number;
};

export const getAllProducts = async ({ page = 0, limit = 10 }: GetAllProductsParams) => {
  const data = await ky
    .get(`${API_BASE_URL}${API_ENDPOINTS.PRODUCTS}`, {
      searchParams: { skip: page * limit, limit },
    })
    .json<GetAllProductsResponse>();

  return data;
};
skip, limit 값을 전달하면 페이지네이션을 사용할 수 있습니다(DummyJSON).
URL은 constants/urls.ts에 상수로 만들어두고 사용하고 있는 상태입니다.'><meta name=author content="Me"><link rel=canonical href=http://localhost:1313/posts/dorothy/0-implement-infinite-scroll/><link crossorigin=anonymous href=/assets/css/stylesheet.630ab9ed535d56d47a9e245df030552b5e97fa0e5b270cbdb284c69b77ed465c.css integrity="sha256-Ywq57VNdVtR6niRd8DBVK16X+g5bJwy9soTGm3ftRlw=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/dorothy/0-implement-infinite-scroll/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="quartzs2의 blog (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>quartzs2의 blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/search/ title="검색 (Alt + /)" accesskey=/><span>검색</span></a></li><li><a href=http://localhost:1313/categories/ title=카테고리><span>카테고리</span></a></li><li><a href=http://localhost:1313/archive/ title=아카이브><span>아카이브</span></a></li><li><a href=http://localhost:1313/tags/ title=태그><span>태그</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[개인 프로젝트] 0. 무한 스크롤 구현하기</h1><div class=post-meta><span title='2025-10-15 01:40:11 +0900 KST'>2025년 10월 15일</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1201 words&nbsp;·&nbsp;Me</div></header><div class=post-content><p><img alt="infinity scroll 구현 이미지" loading=lazy src=/posts/dorothy/0-implement-infinite-scroll/images/infinite.gif></p><p>IntersectionObserver와 tanstack query의 useSuspenseInfiniteQuery를 사용해서 무한 스크롤을 구현해보았습니다.</p><h1 id=api-쿼리-함수-만들기>API 쿼리 함수 만들기<a hidden class=anchor aria-hidden=true href=#api-쿼리-함수-만들기>#</a></h1><p>DummyJSON의 products를 뿌려주기 위해, ky를 사용한 쿼리 함수를 만들어주었습니다.
ky는 axios같은 페칭 라이브러리인데, fetch를 확장했고 가벼워서 좋아하는 라이브러리입니다.
axios랑 마찬가지로 fetch의 400, 500 에러를 발생시키지 않는 단점을 해결했고, json 변환도 편하게 할 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>API_BASE_URL</span><span class=p>,</span> <span class=nx>API_ENDPOINTS</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@constants/urls&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>GetAllProductsResponse</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@custom-types/products&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ky</span> <span class=kr>from</span> <span class=s2>&#34;ky&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>GetAllProductsParams</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>page?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>limit?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>getAllProducts</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>page</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>limit</span> <span class=o>=</span> <span class=mi>10</span> <span class=p>}</span><span class=o>:</span> <span class=nx>GetAllProductsParams</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>ky</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>API_BASE_URL</span><span class=si>}${</span><span class=nx>API_ENDPOINTS</span><span class=p>.</span><span class=nx>PRODUCTS</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>searchParams</span><span class=o>:</span> <span class=p>{</span> <span class=nx>skip</span>: <span class=kt>page</span> <span class=o>*</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>limit</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>json</span><span class=p>&lt;</span><span class=nt>GetAllProductsResponse</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>skip, limit 값을 전달하면 페이지네이션을 사용할 수 있습니다(DummyJSON).
URL은 constants/urls.ts에 상수로 만들어두고 사용하고 있는 상태입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>API_BASE_URL</span> <span class=o>=</span> <span class=s2>&#34;https://dummyjson.com/&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>ROUTES</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>ROOT</span><span class=o>:</span> <span class=s2>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>PRODUCTS</span><span class=o>:</span> <span class=s2>&#34;/products/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>as</span> <span class=kr>const</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>API_ENDPOINTS</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>PRODUCTS</span><span class=o>:</span> <span class=s2>&#34;products&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>as</span> <span class=kr>const</span><span class=p>;</span>
</span></span></code></pre></div><h1 id=스켈레톤-구현>스켈레톤 구현<a hidden class=anchor aria-hidden=true href=#스켈레톤-구현>#</a></h1><p>로딩 중에 표시할 스켈레톤을 구현해야 합니다.
Base 스켈레톤 컴포넌트를 구현하고, 다른 스켈레톤을 구현할 때 사용해서 구현했습니다.</p><p>공통 컴포넌트 Skeleton입니다.
지금 보니까 isAnimate 부분에 삼항연산자를 사용하지 않아도 됐을 것 같네요.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>cn</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@utils/cn&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>SkeletonProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>className?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>animation?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>isAnimate?</span>: <span class=kt>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Skeleton</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>animation</span> <span class=o>=</span> <span class=s2>&#34;animate-pulse&#34;</span><span class=p>,</span> <span class=nx>className</span><span class=p>,</span> <span class=nx>isAnimate</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>}</span><span class=o>:</span> <span class=nx>SkeletonProps</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=p>{</span><span class=nx>cn</span><span class=p>(</span><span class=s2>&#34;rounded-xl bg-gray-200&#34;</span><span class=p>,</span> <span class=nx>isAnimate</span> <span class=o>?</span> <span class=nx>animation</span> <span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=nx>className</span><span class=p>)}</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>Skeleton</span><span class=p>;</span>
</span></span></code></pre></div><p>실제 ProductCard와 동일한 모양의 스켈레톤입니다.
카드 모양을 통일하기 위해 tailwind v4 @theme을 활용해서 값을 지정해주고 사용하고 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Skeleton</span> <span class=kr>from</span> <span class=s2>&#34;@components/ui/Skeleton&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ProductCardSkeleton</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>li</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;h-product-card w-product-card-width rounded-lg border border-gray-200&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Skeleton</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;h-product-image w-full rounded-t-lg&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;space-y-2 px-4 py-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Skeleton</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;h-product-title w-full&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Skeleton</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;h-product-price w-20&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>ProductCardSkeleton</span><span class=p>;</span>
</span></span></code></pre></div><ol><li>처음 로딩될 때 표시할 스켈레톤 리스트(ProductListSkeleton)<ul><li>첫 로딩 시 불러와야 하는 스켈레톤들은 이후 화면에 표시될 스켈레톤들과 동일한 배열을 가지고 있어야 합니다(grid)</li></ul></li><li>무한 스크롤 적용시 불러올 스켈레톤 리스트(ProductCardSkeletonList) - 기존에 불러온 상품 뒤에 이어서 표시되어야 합니다. - 따라서, 배열 관련 코드 없이 스켈레톤만 들어있어야 합니다.
두 가지가 필요합니다.</li></ol><p>특별할건 없습니다. 설명 그대로입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ProductCardSkeletonList</span> <span class=kr>from</span> <span class=s2>&#34;@components/ui/ProductCardSkeletonList&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>ProductListSkeletonProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>count?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ProductListSkeleton</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>count</span> <span class=o>=</span> <span class=mi>9</span> <span class=p>}</span><span class=o>:</span> <span class=nx>ProductListSkeletonProps</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;flex h-full flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;grid grid-cols-2 gap-4 px-4 sm:grid-cols-3&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>ProductCardSkeletonList</span> <span class=na>count</span><span class=o>=</span><span class=p>{</span><span class=nx>count</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>ProductListSkeleton</span><span class=p>;</span>
</span></span></code></pre></div><p>마찬가지입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ProductCardSkeleton</span> <span class=kr>from</span> <span class=s2>&#34;@components/ui/ProductCardSkeleton&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MAX_SKELETON_COUNT</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SKELETON_INDICES</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>({</span> <span class=nx>length</span>: <span class=kt>MAX_SKELETON_COUNT</span> <span class=p>},</span> <span class=p>(</span><span class=nx>_</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>ProductCardSkeletonListProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>count?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ProductCardSkeletonList</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>count</span> <span class=o>=</span> <span class=mi>6</span> <span class=p>}</span><span class=o>:</span> <span class=nx>ProductCardSkeletonListProps</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>SKELETON_INDICES</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>count</span><span class=p>).</span><span class=nx>map</span><span class=p>((</span><span class=nx>index</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>ProductCardSkeleton</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=sb>`skeleton-</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>`</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>))}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>ProductCardSkeletonList</span><span class=p>;</span>
</span></span></code></pre></div><h1 id=무한-스크롤-구현하기>무한 스크롤 구현하기<a hidden class=anchor aria-hidden=true href=#무한-스크롤-구현하기>#</a></h1><h2 id=tanstack-query의-usesuspenseinfinitequery>tanstack query의 useSuspenseInfiniteQuery<a hidden class=anchor aria-hidden=true href=#tanstack-query의-usesuspenseinfinitequery>#</a></h2><p>tanstack query에 좀 더 익숙해지고 싶어서, 직접 useFetch 훅을 구현하지 않고 useSuspensiveInfiniteQuery를 사용했습니다.
useSuspensiveInfiniteQuery를 사용해야 Suspense를 지원합니다. Suspensive 라이브러리를 써보고 싶어서 사용했습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>fetchNextPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>fetchPreviousPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>hasNextPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>hasPreviousPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>isFetchingNextPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>isFetchingPreviousPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>promise</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span><span class=nx>result</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=o>=</span> <span class=nx>useInfiniteQuery</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryKey</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryFn</span><span class=o>:</span> <span class=p>({</span> <span class=nx>pageParam</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=nx>fetchPage</span><span class=p>(</span><span class=nx>pageParam</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialPageParam</span>: <span class=kt>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span><span class=nx>options</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>getNextPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>lastPage</span><span class=p>,</span> <span class=nx>allPages</span><span class=p>,</span> <span class=nx>lastPageParam</span><span class=p>,</span> <span class=nx>allPageParams</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>lastPage</span><span class=p>.</span><span class=nx>nextCursor</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPreviousPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>firstPage</span><span class=p>,</span> <span class=nx>allPages</span><span class=p>,</span> <span class=nx>firstPageParam</span><span class=p>,</span> <span class=nx>allPageParams</span><span class=p>)</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>firstPage</span><span class=p>.</span><span class=nx>prevCursor</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>useInfiniteQuery의 기본 구조입니다. useInfiniteQuery는 useSuspensiveInfiniteQuery와 Suspensive의 지원 유무의 차이 외에 동일합니다.</p><ul><li>fetchNextPage: 다음 페이지를 요청할 때 사용하는 함수</li><li>hasNextPage: 다음 페이지가 있는지 확인하는 boolean</li><li>isFetchingNextPage: 다음 페이지를 불러오는 중인지 확인하는 boolean</li><li>initialPageParam: 첫 번째 페이지를 요청할 때 queryFn으로 전달되는 pageParam의 초기값을 지정합니다(시작 위치를 지정)</li><li>getNextPageParam: 새로운 페이지의 데이터를 성공적으로 받아온 후, 다음 페이지를 요청할때 사용할 pageParam 값을 계산하는 함수입니다.</li></ul><p>그대로 쓰지는 않았고, 훅을 만들어서 분리했습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useSuspenseInfiniteQuery</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@tanstack/react-query&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>UseInfiniteScrollParams</span><span class=p>&lt;</span><span class=nt>QueryFnData</span><span class=p>,</span> <span class=na>QueryKey</span> <span class=na>extends</span> <span class=na>readonly</span> <span class=na>unknown</span><span class=err>[]</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryKey</span>: <span class=kt>QueryKey</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryFn</span><span class=o>:</span> <span class=p>({</span> <span class=nx>pageParam</span> <span class=p>}</span><span class=o>:</span> <span class=p>{</span> <span class=nx>pageParam</span>: <span class=kt>number</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>QueryFnData</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialPage?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>getNextPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>lastPage</span>: <span class=kt>QueryFnData</span><span class=p>,</span> <span class=nx>allPages</span>: <span class=kt>QueryFnData</span><span class=p>[])</span> <span class=o>=&gt;</span> <span class=kt>number</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>useInfiniteScroll</span><span class=p>&lt;</span><span class=nt>QueryFnData</span><span class=p>,</span> <span class=na>QueryKey</span> <span class=na>extends</span> <span class=na>readonly</span> <span class=na>unknown</span><span class=err>[]</span><span class=p>&gt;({</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryKey</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>queryFn</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialPage</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>getNextPageParam</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=o>:</span> <span class=nx>UseInfiniteScrollParams</span><span class=p>&lt;</span><span class=nt>QueryFnData</span><span class=p>,</span> <span class=na>QueryKey</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>useSuspenseInfiniteQuery</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryKey</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryFn</span><span class=o>:</span> <span class=p>({</span> <span class=nx>pageParam</span> <span class=o>=</span> <span class=mi>0</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=nx>queryFn</span><span class=p>({</span> <span class=nx>pageParam</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>getNextPageParam</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>initialPageParam</span>: <span class=kt>initialPage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>useInfiniteScroll</span><span class=p>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 사용하지 않을 경우
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>fetchNextPage</span><span class=p>,</span> <span class=p>...</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useSuspenseInfiniteQuery</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryKey</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;keyA&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryFn</span><span class=o>:</span> <span class=p>({</span> <span class=nx>pageParam</span> <span class=o>=</span> <span class=mi>0</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=nx>fetchMyDataA</span><span class=p>({</span> <span class=nx>pageParam</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>initialPageParam</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>getNextPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>lastPage</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=cm>/* ... */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 사용할 경우
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>fetchNextPage</span><span class=p>,</span> <span class=p>...</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useInfiniteScroll</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryKey</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;keyA&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryFn</span><span class=o>:</span> <span class=nx>fetchMyDataA</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>getNextPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>lastPage</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=cm>/* ... */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>tanstack query를 사용하지 않고 직접 구현했을 때, 훅으로 분리했을 때의 장점이 많이 드러났던 경험이 있습니다.</p><p>지금은 모양이 크게 차이나지 않기 때문에 훅을 사용해서 분리했을때의 장점 중 하나인 코드가 간소화된다는 장점은 잘 느껴지지 않아서, 훅을 지울까 말까 고민을 했었습니다.</p><p>프로젝트를 진행하면서 무한 스크롤이 필요할 경우, 일관된 컨벤션을 강제할 수 있는 장점 때문에 그대로 유지하고 진행했습니다.</p><h1 id=useintersect-훅과-infinitescrolltrigger-만들기>useIntersect 훅과 InfiniteScrollTrigger 만들기<a hidden class=anchor aria-hidden=true href=#useintersect-훅과-infinitescrolltrigger-만들기>#</a></h1><h2 id=useintersect-훅-구현>useIntersect 훅 구현<a hidden class=anchor aria-hidden=true href=#useintersect-훅-구현>#</a></h2><p>스켈레톤을 로딩해야하는지 감지하기 위해서 IntersectionObserver를 사용해야 합니다. (스크롤을 감지해서 구현할 수도 있지만 여기서는 IntersectionObserver를 사용했습니다)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useEffect</span><span class=p>,</span> <span class=nx>useRef</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>UseIntersectOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>threshold?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>rootMargin?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>UseIntersectReturn</span><span class=p>&lt;</span><span class=nt>T</span> <span class=na>extends</span> <span class=na>HTMLElement</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>ref</span>: <span class=kt>React.RefObject</span><span class=p>&lt;</span><span class=nt>T</span> <span class=err>|</span> <span class=na>null</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>useIntersect</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>T</span> <span class=na>extends</span> <span class=na>HTMLElement</span><span class=p>&gt;(</span>
</span></span><span class=line><span class=cl>  <span class=nx>callback</span><span class=o>:</span> <span class=p>(</span><span class=nx>isIntersecting</span>: <span class=kt>boolean</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>options</span>: <span class=kt>UseIntersectOptions</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=nx>UseIntersectReturn</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>ref</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>&lt;</span><span class=nt>T</span> <span class=err>|</span> <span class=na>null</span><span class=p>&gt;(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>isIntersectingRef</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>callbackRef</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>(</span><span class=nx>callback</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>callbackRef</span><span class=p>.</span><span class=nx>current</span> <span class=o>=</span> <span class=nx>callback</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[</span><span class=nx>callback</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>.</span><span class=nx>current</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>element</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>observer</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nx>entries</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>entry</span> <span class=o>=</span> <span class=nx>entries</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>isIntersecting</span> <span class=o>=</span> <span class=nx>entry</span><span class=p>.</span><span class=nx>isIntersecting</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>isIntersecting</span> <span class=o>!==</span> <span class=nx>isIntersectingRef</span><span class=p>.</span><span class=nx>current</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>isIntersectingRef</span><span class=p>.</span><span class=nx>current</span> <span class=o>=</span> <span class=nx>isIntersecting</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=nx>callbackRef</span><span class=p>.</span><span class=nx>current</span><span class=p>(</span><span class=nx>isIntersecting</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>threshold</span>: <span class=kt>options.threshold</span> <span class=o>??</span> <span class=mf>0.1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rootMargin</span>: <span class=kt>options.rootMargin</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>observer</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>observer</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[</span><span class=nx>options</span><span class=p>.</span><span class=nx>threshold</span><span class=p>,</span> <span class=nx>options</span><span class=p>.</span><span class=nx>rootMargin</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>useIntersect</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=infinitescrolltrigger-구현>InfiniteScrollTrigger 구현<a hidden class=anchor aria-hidden=true href=#infinitescrolltrigger-구현>#</a></h2><p>타깃이 화면에 들어오는걸 감지하기 때문에, Trigger역할을 할 컴포넌트도 만들어줘야 하는데, 이것도 마찬가지로 컨벤션을 강제하고 싶어서 따로 분리했습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useIntersect</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@hooks&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useCallback</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>InfiniteScrollTriggerProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>hasNextPage</span>: <span class=kt>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>fetchNextPage</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>InfiniteScrollTrigger</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>hasNextPage</span><span class=p>,</span> <span class=nx>fetchNextPage</span> <span class=p>}</span><span class=o>:</span> <span class=nx>InfiniteScrollTriggerProps</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleIntersect</span> <span class=o>=</span> <span class=nx>useCallback</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nx>isIntersecting</span>: <span class=kt>boolean</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>isIntersecting</span> <span class=o>&amp;&amp;</span> <span class=nx>hasNextPage</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fetchNextPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>hasNextPage</span><span class=p>,</span> <span class=nx>fetchNextPage</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useIntersect</span><span class=p>&lt;</span><span class=nt>HTMLDivElement</span><span class=p>&gt;(</span><span class=nx>handleIntersect</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref</span><span class=p>}</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;h-1&#34;</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>InfiniteScrollTrigger</span><span class=p>;</span>
</span></span></code></pre></div><h1 id=사용하는-페이지-코드>사용하는 페이지 코드<a hidden class=anchor aria-hidden=true href=#사용하는-페이지-코드>#</a></h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getAllProducts</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@api/getAllProducts&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>ErrorFallback</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>InfiniteScrollTrigger</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>ProductCard</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>ProductCardSkeletonList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>ProductListSkeleton</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@components/ui&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>queryKeys</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@constants/queryKeys&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ROUTES</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@constants/urls&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useInfiniteScroll</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@hooks&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ErrorBoundary</span><span class=p>,</span> <span class=nx>Suspense</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@suspensive/react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createFileRoute</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@tanstack/react-router&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>Route</span> <span class=o>=</span> <span class=nx>createFileRoute</span><span class=p>(</span><span class=nx>ROUTES</span><span class=p>.</span><span class=nx>PRODUCTS</span><span class=p>)({</span>
</span></span><span class=line><span class=cl>  <span class=nx>component</span>: <span class=kt>ProductsListRoute</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>ProductsListRoute() {</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Suspense</span> <span class=na>fallback</span><span class=o>=</span><span class=p>{&lt;</span><span class=nt>ProductListSkeleton</span> <span class=p>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ErrorBoundary</span> <span class=na>fallback</span><span class=o>=</span><span class=p>{({</span> <span class=nx>error</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>&lt;</span><span class=nt>ErrorFallback</span> <span class=na>error</span><span class=o>=</span><span class=p>{</span><span class=nx>error</span><span class=p>}</span> <span class=p>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>ProductsListPage</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ErrorBoundary</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Suspense</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>ProductsListPage() {</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>PRODUCTS_PER_PAGE</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>fetchNextPage</span><span class=p>,</span> <span class=nx>hasNextPage</span><span class=p>,</span> <span class=nx>isFetchingNextPage</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useInfiniteScroll</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryKey</span>: <span class=kt>queryKeys.products.infinite</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>queryFn</span><span class=o>:</span> <span class=p>({</span> <span class=nx>pageParam</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=nx>getAllProducts</span><span class=p>({</span> <span class=nx>page</span>: <span class=kt>pageParam</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>PRODUCTS_PER_PAGE</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>initialPage</span>: <span class=kt>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>getNextPageParam</span><span class=o>:</span> <span class=p>(</span><span class=nx>lastPage</span><span class=p>,</span> <span class=nx>allPages</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>hasMore</span> <span class=o>=</span> <span class=nx>allPages</span><span class=p>.</span><span class=nx>length</span> <span class=o>*</span> <span class=nx>PRODUCTS_PER_PAGE</span> <span class=o>&lt;</span> <span class=nx>lastPage</span><span class=p>.</span><span class=nx>total</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>hasMore</span> <span class=o>?</span> <span class=nx>allPages.length</span> : <span class=kt>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>products</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>pages</span><span class=p>.</span><span class=nx>flatMap</span><span class=p>((</span><span class=nx>page</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>page</span><span class=p>.</span><span class=nx>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>main</span> <span class=na>aria-label</span><span class=o>=</span><span class=s>&#34;전체 상품&#34;</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;flex h-full flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;sr-only&#34;</span><span class=p>&gt;</span><span class=err>전체</span> <span class=err>상품</span> <span class=err>목록</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;grid grid-cols-2 gap-4 px-4 sm:grid-cols-3&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>li</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>ProductCard</span> <span class=p>{</span><span class=na>...product</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>))}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=nx>isFetchingNextPage</span> <span class=o>&amp;&amp;</span> <span class=p>&lt;</span><span class=nt>ProductCardSkeletonList</span> <span class=na>count</span><span class=o>=</span><span class=p>{</span><span class=nx>PRODUCTS_PER_PAGE</span><span class=p>}</span> <span class=p>/&gt;}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>InfiniteScrollTrigger</span> <span class=na>hasNextPage</span><span class=o>=</span><span class=p>{</span><span class=nx>hasNextPage</span><span class=p>}</span> <span class=na>fetchNextPage</span><span class=o>=</span><span class=p>{</span><span class=nx>fetchNextPage</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>관련된 코드는 이 글에 거의 다 포함되어 있지만, 혹시나 궁금하신 분들은 아래 PR에서 전체 코드를 보실 수 있습니다.
<a href=https://github.com/quartzs2/dorothy/pull/8 target=_blank rel="noopener noreferrer">https://github.com/quartzs2/dorothy/pull/8</a></p><p>읽어주셔서 감사합니다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/dorothy/>Dorothy</a></li><li><a href=http://localhost:1313/tags/%EA%B0%9C%EC%9D%B8%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/>개인프로젝트</a></li><li><a href=http://localhost:1313/tags/%EB%AC%B4%ED%95%9C%EC%8A%A4%ED%81%AC%EB%A1%A4/>무한스크롤</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/aws-amazon-q-hackaton-retrospective/><span class=title>Next »</span><br><span>AMAZON Q 해커톤 회고</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on x" href="https://x.com/intent/tweet/?text=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f&amp;hashtags=Dorothy%2c%ea%b0%9c%ec%9d%b8%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%2c%eb%ac%b4%ed%95%9c%ec%8a%a4%ed%81%ac%eb%a1%a4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f&amp;title=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0&amp;summary=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f&title=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on telegram" href="https://telegram.me/share/url?text=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [개인 프로젝트] 0. 무한 스크롤 구현하기 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%5b%ea%b0%9c%ec%9d%b8%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%5d%200.%20%eb%ac%b4%ed%95%9c%20%ec%8a%a4%ed%81%ac%eb%a1%a4%20%ea%b5%ac%ed%98%84%ed%95%98%ea%b8%b0&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fdorothy%2f0-implement-infinite-scroll%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div class=comments id=comments><script>(function(){const n=document.getElementById("comments");if(!n)return;function s(){return document.body.classList.contains("dark")?"github-dark":"github-light"}function o(){const t=n.querySelector('script[src="https://utteranc.es/client.js"]');if(t)return;const e=document.createElement("script");e.src="https://utteranc.es/client.js",e.async=!0,e.setAttribute("repo","quartzs2/github-blog-comments"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",s()),e.setAttribute("crossorigin","anonymous"),n.appendChild(e)}function t(){const e=document.querySelector("iframe.utterances-frame");if(!e)return;try{e.contentWindow.postMessage({type:"set-theme",theme:s()},"https://utteranc.es")}catch{}}o();const i=new MutationObserver(t);i.observe(document.body,{attributes:!0,attributeFilter:["class"]});const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");e&&e.addEventListener?e.addEventListener("change",t):e&&e.addListener&&e.addListener(t),window.addEventListener("load",t)})()</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>quartzs2의 blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>